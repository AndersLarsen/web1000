<?php /** *Registrere nytt rom i løsningen * * PHP version 5 * * LICENSE: This source file is subject to version 3.01 of the PHP license * that is available through the world-wide-web at the following URI: * http://www.php.net/license/3_01.txt.  If you did not receive a copy of * the PHP License and are unable to obtain it through the web, please * send a note to license@php.net so we can mail you a copy immediately. * * @author		Original Author <andersborglarsen@gmail.com> * @author		Original Author <haavard@ringshaug.net> * @author		Original Author <oyvind.gautestad@gmail.com> * @author		Original Author <linda.fermann@gmail.com> * @copyright 	2013-2018 * @license		http://www.php.net/license/3_01.txt * @link		http://student.hive.no/web10007/1 * */$title = 'Registrer rom - roomEdit';include '../includes/headerVedlikehold.php';	// INKLUDERER HEADERcheckLogin();									// SJEKKER OM BRUKEREN ER LOGGET INNcheckAdmin();									// SJEKKER OM EN BRUKER HAR ADMIN STATUS?><h1>Registrere nytt rom i løsningen</h1><fieldset>	<legend>Registrer rom</legend>	<form class="" name="reg_room" action="" method="post" onSubmit='return validateRoomName((document.getElementById("room_name").value))'>		<p>Romnavn skal ha format [Blokk][Etasje]-[Romnummer] f.eks. slik: A2-53</p>		<label>Navn </label><input type="text" name="room_name" id="room_name"  pattern="[A-Z][1-9][-][0-9]{1,2}[0-9A-Z]{0,2}" required> 		<label>Type</label>		<?php 		connect();																		// KOBLER TIL DATABASEN		$sql = "CALL showDistinctRoomtype;";											// SQL SETNING		$result = mysql_query($sql) or die ("ikke mulig å hente romtype fra databasen");// KJØRER SQL SPØRRING PÅ DB SERVER		$numRows = mysql_num_rows($result);												// HENTER RESULTATET FRA SQL SPØRRINGEN		disconnect();																	// KOBLER FRA DATABASEN		// lager dynamisk listeboks basert på rom funnet i databasen		echo ("<select name='room_type' id='room_type'>");								// STARTEN PÅ LISTEBOKSEN		for($t=1; $t<=$numRows; $t++){													// FOR-LØKKE FOR Å SKRIVE UT HVERT ENKELT RESULTAT			$row=mysql_fetch_array($result);											// HENTER ARRAY FRA SQL SPØRRINGEN			echo "<option value='$row[0]'> $row[0] </option> ";							// SKRIVER UT RAD FOR RAD FRA SQL ARRAYET		}		echo "</select>";																// AVSLUTTER LISTEBOKSEN		?>		<input class='submit' type='submit' value='Registrer' name='reg'> <input			class='submit' type='button' value='Tilbake'			onClick="location.href='vis-rom.php'">	</form></fieldset><?php /****************************** Legge til nytt rom ****************************************/$reg=$_POST[reg];								// HENTER INN SUBMIT KNAPPEN FRA SKJEMAETif($reg){										// LYTTER TIL OM SUMBIT KNAPPEN BLIR TRYKKET	connect(); 									// KOBLER TIL DATABASEN	$room_name = $_POST["room_name"];			// HENTER INN ROMNAVN FRA SKJEMAET	$room_type = $_POST["room_type"];			// HENTER INN ROMTYPE FRA SKJEMAET	if(validateRoomName($room_name)){		$sql="CALL addNewRoom('$room_name','$room_type');";	// KALLER PÅ EN LEGGTILROM PROSEDYRE PÅ SQL SERVEREN		$result=mysql_query($sql) or die ("ikke mulig å registrere rom for øyblikket");	// HENTER INN RESULTATET FRA SQL SPØRRINGEN		echo "<script> alert('Følgende rom er nå lagt inn: $room_name $room_type ') </script>";	// GIR TILBAKEMELDING TIL BRUKEREN OM AT ROMMET ER BLITT LAGT TIL	}	disconnect();									// KOBLER FRA DATABASEN}include '../includes/footerVedlikehold.php';	// INKLUDERER SLUTTEN PÅ DESIGNET?>