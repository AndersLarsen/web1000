<?php /** * ENDRE INFORMASJONEN TIL BRUKERENE * ENDRE BRUKER NAVN * ENDRE MAIL * ENDRE POSISJON * ENDRE OM MAN ER ADMIN ELLER IKKE	 * * PHP version 5 * * LICENSE: This source file is subject to version 3.01 of the PHP license * that is available through the world-wide-web at the following URI: * http://www.php.net/license/3_01.txt.  If you did not receive a copy of * the PHP License and are unable to obtain it through the web, please * send a note to license@php.net so we can mail you a copy immediately. * * @author		Original Author <andersborglarsen@gmail.com> * @author		Original Author <haavard@ringshaug.net> * @author		Original Author <oyvind.gautestad@gmail.com> * @author		Original Author <linda.fermann@gmail.com> * @copyright 	2013-2018 * @license		http://www.php.net/license/3_01.txt * @link		http://student.hive.no/web10007/1 * */$title = 'Endre Bruker - roomEdit';include '../includes/headerVedlikehold.php';		// INKLUDERER HEADERcheckLogin();										// SJEKKER AT MAN ER LOGGET INNcheckAdmin();										// SJEKKER OM EN BRUKER HAR ADMIN STATUS?><h1>Endre Romtype</h1><?php /****************************** Endre Bruker ****************************************/$modifySubmit=$_POST["modifySubmit"];				// HENTER INN EN INPUT KNAPP FRA SKJEMAET$roomtype = $_POST["roomtype"];							// LAGRER BRUKERID FRA SKJEMAETconnect();											// KOBLER TIL DATABASEN$sql= "SELECT Roomtype FROM roomtypes where Roomtype='$roomtype';";				// SQL SPØRRINGEN $result = mysql_query($sql) or die ("ikke mulig å hente Bruker fra  fra databasen");	//RETURNERER FEILMELDING HVIS SPØRRINGEN FEILER$row=mysql_fetch_array($result);					// HENTER ARY TAR DET UT I RADERdisconnect();										// KOBLER FRA DATABASENecho "<fieldset>";echo "  <form class='' name='updateuser' action='' method='post' onSubmit='return validateRoomType((document.getElementById(\"roomtype\").value))'>";echo "	<input type='hidden' name='oldroomtype' value='$roomtype'>";echo "	<label>Romtype</label>  <input type='text' name='roomtype' id='roomtype' value='$roomtype' pattern='^[A-ZÆØÅ][a-z æøå]+$' required><br>";echo "	<input type='submit' value='Lagre endringer' name='regUpdate'>";echo "</form>";echo "</fieldset>";echo ("		<form method='post' action='innstillinger.php'>		<input type='submit' value='Avbryt' id='back' name='back'>		</form>		");																					//AVBRYTER ENDRING OG DIRIGERER TILBAKE$regUpdate = $_POST["regUpdate"];					//HENTER INN SUBMITKNAPPEN if ($regUpdate){									// LYTTER TIL SUBMITKNAPPEN	$roomtype = $_POST["roomtype"];						// LAGRER USERID VARIABEL I SKJEMAET	$oldroomtype = $_POST["oldroomtype"];									// LAGRER DATA I EN LOKAL VARIABEL FRA EN RAD I SQL ARRAYET		if(validateRoomType($roomtype)) {										// VALIDERER			connect();											//kobler til databasen		$sqlSetning="SELECT Roomtype FROM roomtypes WHERE Roomtype='$roomtype';";	//sjekker om brukernavn finnes fra før		$sqlResultat=mysql_query($sqlSetning);		$antallRader=mysql_num_rows($sqlResultat);		disconnect();		if($antallRader !==0){								//bruker må velge annet brukernavn dersom det finnes fra før			print("<script>alert('Romtypen ".$roomtype."finnes fra før')</script>");			}			else {		connect();										// KOBLER TIL DATABASE		$sql="	UPDATE roomtypes SET 																		Roomtype='$roomtype'				WHERE 				Roomtype='$oldroomtype';";						//SQL SPØRRING SOM OPPDARER BRUKER		$result=mysql_query($sql) or die ("ikke mulig å oppdatere romtype i databasen");	//LAGRER SVARET FRA SQL SPØRRINGEN		print("<script>alert('Romtypen med navn $roomtype er oppdatert.'); window.location = 'innstillinger.php';</script>"); // BEKREFTELSE TIL BRUKEREN AT DATAENE ER LAGRET			disconnect();		}									// KOBLER FRA DATABASEN		}}include '../includes/footerVedlikehold.php';		// INKLUDERER FOOTER