<?php/** * Dagplan * * * PHP version 5 * * LICENSE: This source file is subject to version 3.01 of the PHP license * that is available through the world-wide-web at the following URI: * http://www.php.net/license/3_01.txt.  If you did not receive a copy of * the PHP License and are unable to obtain it through the web, please * send a note to license@php.net so we can mail you a copy immediately. * * @author		Original Author <andersborglarsen@gmail.com> * @author		Original Author <haavard@ringshaug.net> * @author		Original Author <oyvind.gautestad@gmail.com> * @author		Original Author <linda.fermann@gmail.com> * @copyright 	2013-2018 * @license		http://www.php.net/license/3_01.txt * @link		http://student.hive.no/web10007/1 * */$title = 'Dagplan - roomEdit';include("../includes/headerNettsted.php");				// INKLUDERER HEADERENcheckLogin();											// SJEKKER OM EN BRUKER ER LOGGET INN$userRef = $_SESSION['userRef'];						// LAGRER USERREF FRA SESSION TIL EN LOKAL VARIABEL?><h1> Dagplan</h1><p>Velg først ønsket måned og år, deretter tidsrom og velg hvilken type rom du vil bestille.</p><?php $selectDate = phpCalendar($userRef);$selectDate = $_POST["selectDate"];echo "<form method='post' action='' name='showBookingRoomForm' id='showBookingRoomForm'>";?><p>Du har valgt dato: <?php echo normalDate($selectDate); ?>  </p>		<input type="hidden" name="date" id="date" value="<?php echo $selectDate; ?>" /><?phpecho "<label for='rom' class='clearfloat'>Rom</label>		<select name='room[]' multiple >";			echo listRooms($userRef);echo "</select>";echo "Dagtid <input type='radio' name='timeOfView' value='480:960'checked >	  Kveldstid <input type='radio' name='timeOfView' value='960:1200'>";echo "<input type='submit' name='submitShowBookingRoom' id='submitShowBookingRoom' value='Vis' form='showBookingRoomForm'>";echo "</form>";$submitShowBookingRoom = $_POST["submitShowBookingRoom"];	// lytter på submit-knapp i formif($submitShowBookingRoom){									// går videre hvis submit-knapp trykkes		$date = $_POST['date'];									//henter ut verdier fra skjema	$rooms = $_POST['room'];		if(!$date || empty($rooms)){ die("<script> alert('Dato og rom må fylles ut') </script>");};																//tilordne start- og sluttverdi til hvilket tidsrom som bruker velger. Dag- eller kveldstid.	$timeOfView = $_POST['timeOfView'];	$timeOfView = explode(":", $timeOfView);	$startOfView = $timeOfView[0];	$endOfView = $timeOfView[1];															//tilordne tidsrom slutt																//finner distinkte minutter i databasen og tilordne til $timeInterval	connect();	$sqlTime="SELECT DISTINCT SUBSTRING(Klokka,4,2) as Timer FROM time;"; 	$resultTime=mysql_query($sqlTime) or die ("Ikke mulig å hente tidsintervall");	$numRowsTime=mysql_num_rows($resultTime);				//dersom 4->15 min (00,15,30,45), dersom 2->30 min (00,30), dersom 1->60 min (00)	disconnect();												if ($numRowsTime==4) {			$timeInterval = 15;		} elseif ($numRowsTime==2) {			$timeInterval = 30;		} else {			$timeInterval = 60;		}													//$timeInterval slutt		echo "<h2>" . normalDate($date) . "</h2><br>";			foreach($rooms as $room){								// starter funksjon som heter showBookingRoom som tegner opp et grafisk representasjon av om rom er ledig/oppatt		showBookingsRoom( $date, $room, $timeInterval, $startOfView, $endOfView );	}}?><?php include("../includes/footerNettsted.php");		?>